"use strict";import E from"https://unpkg.com/slotted-element@1.1.0/fetch-element.js";import{CssChain as f}from"./CssChain.js";const d=(n,t,r="")=>n.map(t).join(r),g=n=>n&&n.endsWith&&["png","gif","svg"].find(t=>n.endsWith(t));window.customElements.define("pokemon-link-element",class extends HTMLElement{connectedCallback(){const t=f(this),r=e=>t.$(e),l=t.attr("name"),p=t.attr("url");if(g(p)){debugger;return t.html(`<img title="${l}" src="${p}">`)}t.html(`<a href="${p}">${l}</a><dl></dl>`),r("a").on("click",async e=>{if(e.preventDefault(),this.loaded)return r("dl").erase(),this.loaded=0;this.loaded=1;const i=await(await fetch(p)).json();r("dl").html(o(i))});function o(e,i=""){if(e==null||typeof e=="string"||typeof e=="number")return g(e)?`<img title="${i}
${e}" src="${e}">`:i?`<span><code>${i}</code> : <val>${e}</val></span>`:`<val>${e}</val>`;if(Array.isArray(e))return`<fieldset><legend>${i}</legend>${d(e,o,"<hr/>")}</fieldset>`;let s=[],$=Object.keys(e);const m=e.name&&e.url&&g(e.url)?`<img title="${l}" src="${p}"/>`:`<pokemon-link-element name="${e.name}" url="${e.url}"></pokemon-link-element> `;if($.length===2&&e.name&&e.url)s.push(m);else{i&&(s.push("<fieldset>"),s.push(`<legend>${i}</legend>`));for(let a in e)switch(a){case"name":if(e.url)break;case"url":e.url&&e.name&&s.push(m);break;default:Array.isArray(e[a])?s.push(`<fieldset><legend>${a}</legend>${d(e[a],x=>o(x),"<hr/>")}</fieldset>`):s.push(o(e[a],a))}i&&s.push("</fieldset>")}return s.join("")}}}),window.customElements.define("pokemon-info-element",class extends E{render(t){const{other:r,versions:l,...p}=t.sprites,o=(s,$)=>`<fieldset><legend>${s}</legend>
                ${d(Object.entries($),([m,a])=>a?typeof a=="string"?`<img src="${a}" title="${m}"/>`:o(m,a):"")}</fieldset>`,e=()=>`<fieldset><legend>abilities</legend>
                ${d(t.abilities,s=>`<a href="${s.ability.url}">${s.ability.name}</a><sup>${s.slot}</sup>`)}</fieldset>`,i=(s,$)=>`<details><summary>${s}</summary>${d($,m=>`<pokemon-link-element url="${m.url}" name="${m.name}"></pokemon-link-element>`)}</details>`;return`<h1>${t.name}</h1>
                    <img src="${`https://unpkg.com/pokeapi-sprites@2.0.2/sprites/pokemon/other/dream-world/${t.id}.svg`}" alt="" />
                    <div class="hiflex">
                        ${i("abilities",t.abilities.map(s=>s.ability))}
                        ${i("forms",t.forms)}
                        ${i("game indices",t.game_indices.map(s=>s.version))}
                        ${i("moves",t.moves.map(s=>s.move))}
                        ${i("stats",t.stats.map(s=>s.stat))}
                        ${i("types",t.types.map(s=>s.type))}
                        ${i("species",[t.species])}
                    </div>
                    ${o("Sprites",p)}
                    ${o("other",r)}
                    ${o("versions",l)}
                    `}});let c=0,u=10;const j=async()=>(await fetch(`https://pokeapi.co/api/v2/pokemon?limit=${u}&offset=${c}`)).json(),v=f(),k=async n=>f("pokemon-info-element").attr("src",n.url),A=n=>(t=>(t.pop(),t.pop()))(n.url.split("/")),w=n=>`https://unpkg.com/pokeapi-sprites@2.0.2/sprites/pokemon/other/dream-world/${A(n)}.svg`,h=v.slots("slot-select"),y=h.parent().$("dl"),b=async()=>{const n=await j();return y.erase(),c?y.append(h.clone(n.results,(t,r,l)=>f(t).prop("hidden",!1).prop("checked",!l,"input").prop("src",w(r),"img").on("click",()=>k(r)).slots("index",""+(c+l)).slots("name",r.name))):n.results.forEach((t,r)=>{const l=h.clone();l.hidden=!1,l.$("input").checked=!r,l.slots("index").innerText=""+(c+r),l.slots("name").innerText=t.name,l.on("click",()=>k(t)),l.$("img").src=w(t),y.append(l)}),k(n.results[0]),prevBtn.disabled=c<=0,nextBtn.disabled=c+u>=n.count,n};h.remove();const P=await b();v.slots("counter").txt(P.count),prevBtn.onclick=()=>b(c-=u),nextBtn.onclick=()=>b(c+=u);
//# sourceMappingURL=PokeApi-Explorer.js.map
